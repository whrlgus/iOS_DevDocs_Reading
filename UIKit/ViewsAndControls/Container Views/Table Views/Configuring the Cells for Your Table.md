# Configuring the Cells for Your Table

storyboard에서 하나 이상의 프로토타입 셀을 정의하여 테이블의 외양과 컨텐츠를 지정하자.

## Overview

셀은 테이블 행의 시각적 표현을 제공한다. 우리는 대부분의 테이블에 한 두개의 다른 셀 타입을 사용할 것이다. 셀에서 뷰나 뷰 구성을 신중히 선택하여, 가장 중요한 정보가 두드러지도록 셀을 디자인하자. 

우리는 스토리보드 파일에서 디자인할 때 셀의 외양을 지정한다. Xcode는 각 테이블에 하나의 프로토타입 셀을 제공하고, 필요시 프로토타입 셀을 추가할 수 있다. 프로토타입 셀은 셀의 외양의 원형(template)처럼 여겨진다. 보여주고 싶은 뷰와 셀의 컨텐츠 영역에서의 정렬/설비가 포함된다. 런타임에 테이블의 data source 객체가 프로토타입과 구성으로부터 앱의 데이터로 이뤄진 실제 셀을 생성한다.

## Assign a Reuse Identifier to Each Cell

reuse identifier는 테이블 셀의 생성과 재활용을 수월하게 해준다. reuse identifier는 각 프로토타입 셀에 할당된 문자열이다. 스토리보드에서 프로토타입 셀을 선택하여 identifier 속성에 빈 값이 아닌 문자열을 할당하자. 각 셀은 반드시 유일한 reuse identifier를 가져야 한다.

런타임에 셀 객체가 필요하면, dequeueReusableCell(withIdentifier:for:) 메소드를 호출하고, 원하는 셀의 reuse identifier를 전달하자. 테이블 뷰는 이미 생성된 셀들을 보관하는 내부 큐를 가지고 있다. 만약 큐가 요청되는 타입의 셀을 가지고 있다면, 테이블 뷰는 그 셀을 반환한다. 그렇지 않다면 새로운 셀을 생성한다. 셀을 재사용하는 것은 스크롤링과 같은 중요한 시간에 메모리 할당을 최소화하여 성능을 향상시킨다.

## Configure a Cell with a Built-In Style

셀을 구성하는 가장 간단한 방법은 UITableViewCell이 제공하는 내장 스타일을 사용하는 것이다. 이 스타일을 그대로 사용하자; 셀을 관리하기 위한 커스텀 서브클래스를 제공할 필요가 없다. 각 스타일은 컨텐츠 뷰 내에 위치가 정해진 스타일로 하나 이상의 label을 포함한다. 

표준 스타일 중 하나로 프로토타입 셀을 구성하기 위해, 스토리보드에서 셀을 선택하고 style 프로퍼티에 custom이 아닌 값을 설정하자.

![](https://docs-assets.developer.apple.com/published/058691787a/c7697036-d465-4323-8b2f-f024d76b3916.png)

tableView(_:cellForRowAt:) 메소드에서 UITableViewCell의 textLabel, detailTextLabel, 그리고 imageView 프로퍼티를 사용하여 셀 컨텐츠를 구성하자. 이 프로퍼티들은 뷰를 포함하지만, 셀 객체는 그 스타일이 응당하는 컨텐츠를 지원하는 경우에만 뷰를 할당한다. 예를 들어, Basic 셀 스타일은 상세 문자열을 지원하지 않으며, detailTextLabel 프로퍼티는 nil이다. 

## Configure a Cell with Custom Views

표준 스타일이 아닌 외양을 위해서 커스텀 셀 스타일을 사용하자. 셀에 원하는 뷰, 구성, 크기와 위치를 지정할 수 있다. 레이블이나 이미지같은 Static 뷰는 셀의 컨텐츠를 구성하는 데 좋다. 컨트롤과 같은 유저 인터랙션이 필요한 뷰는 피하자. 셀에 스크롤 뷰, 테이블 뷰, 콜랙션 뷰나 다른 복잡한 뷰를 포함하지 말자. 셀에 스택뷰를 포함할 수 있지만, 이 경우 성능 향상을 위해 아이템 개수를 최소화 하자.

커스텀 셀을 구성하기 위해, 테이블의 프로토타입 셀에 뷰를 드래그 하자. 다음 그림은 셀의 커스텀 레이아웃과 뷰의 형태를 보여준다. 셀의 컨텐츠 영역내에 뷰를 놓기 위해 제약을 사용한다. 제약 설정 시에, 셀의 컨텐츠 영역과의 간격를 두기위해 "Constrain to margins" 옵션을 사용하자.

![](https://docs-assets.developer.apple.com/published/f304dea2ab/dfe0b869-fe12-48f0-8693-777e90df3ef3.png)



## Change the Height of Rows

테이블 뷰는 행 각각의 높이를 추적한다. UITableView는 행을 위한 기본 사이즈를 제공하지만, 테이블 뷰의 rowHeight 프로퍼티에 커스텀 값을 할당하여 기본 높이를 정할 수 있다. 모든 행의 높이가 같다면 항상 이 프로퍼티를 사용하자. 델리게이트 객체로부터 높이 값을 반환하는 것보다 훨씬 효율적이다.

만약 행의 높이가 모두 같지 않거나, 동적으로 변할 수 있다면, 델리게이트 객체의 tableView(_:heightForRowAt:) 메소드를 통해 높이를 제공하자. 이 메소드를 구현할때에는 모든 행이 높이를 제공할 수 있어야 한다. 

테이블 뷰는 보이는 행의 높이만 요구한다. 사용자가 스크롤할 때, 테이블 뷰에 보여질 행이 갖는 높이를 제공해야 한다.



## Restore Your Cell's Original Appearance Before Reuse

셀이 화면을 벗어날 때, 테이블 뷰는 셀을 뷰 계층에서 제거하고 내부에서 관리되는 재활용 큐에 위치시킨다. 테이블 뷰의 dequeueReusableCell(withIdentifier:for:) 메소드를 사용하여 새로운 셀을 요청하면, 테이블 뷰는 이 재활용 큐의 첫 셀을 반환한다. 만약 큐가 비어있다면, 테이블 뷰는 스토리보드에서 새로운 셀을 인스턴스화 한다.

만약 커스텀 셀에 있는 뷰의 외양을 변경한다면, 셀 서브클래스의 prepareForReuse() 메소드를 구현하자. 구현체에서 셀에 있는 뷰를 원래 상태로 돌려놓자. 예를 들어, 셀에서 alpha 프로퍼티를 변경했다면, 이 프로퍼티를 기본 값으로 돌려놓자. 레이블의 텍스트를 초기화하거나, 이미지를 nil로 설정하는 등, tableView(_:cellForRowAt:) 메소드에서 셀을 보여주기위해 구성할 때 하는 작업은 하지 않아도 된다.

